---
import type { CollectionEntry } from "astro:content";
import Datetime from "@/components/Datetime.astro";
import { slugifyStr } from "@/utils/slugify";
import getNoteSlug from "@/utils/getNoteSlug";

interface Props {
  note: CollectionEntry<"notes">;
}

const { note } = Astro.props;
const { title, summary, pubDatetime, tags, timezone } = note.data;
const slug = getNoteSlug(note);
const href = `/notes/${slug}/`;
---

<article
  class="rounded-2xl border border-border/80 bg-background/70 p-5 transition hover:-translate-y-0.5 hover:border-accent dark:bg-slate-900/40"
>
  <a href={href} class="group block no-underline">
    <h3 class="text-xl font-semibold group-hover:text-accent">{title}</h3>
  </a>
  <Datetime {pubDatetime} {timezone} class="text-sm text-foreground/80" />
  <p class="mt-3 text-sm text-foreground">{summary}</p>
  <ul class="mt-4 flex flex-wrap gap-2 text-xs font-medium">
    {
      tags.map(tag => {
        const tagSlug = slugifyStr(tag);
        return (
          <li>
            <a
              href={`/notes/?tag=${tagSlug}`}
              class="inline-flex items-center rounded-full border border-border/70 px-3 py-1 text-foreground/80 transition hover:border-accent hover:text-accent"
            >
              <span class="me-1 text-sm font-semibold text-accent">#</span>
              {tag}
            </a>
          </li>
        );
      })
    }
  </ul>
</article>
