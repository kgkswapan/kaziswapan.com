---
import type { GetStaticPaths } from "astro";
import { getCollection } from "astro:content";
import Layout from "@/layouts/Layout.astro";
import Header from "@/components/Header.astro";
import Footer from "@/components/Footer.astro";
import Main from "@/layouts/Main.astro";
import QuoteCard from "@/components/QuoteCard.astro";
import Pagination from "@/components/Pagination.astro";

export const getStaticPaths = (async ({ paginate }) => {
  const quotes = await getCollection("quotes");
  const sorted = quotes.sort((a, b) => a.id.localeCompare(b.id));
  return paginate(sorted, { pageSize: 10 });
}) satisfies GetStaticPaths;

const { page } = Astro.props;
---

<Layout>
  <Header />
  <Main pageTitle="Quotes" pageDesc="A small collection of thoughts worth remembering.">
    <section class="section-unstyled px-0">
      <div class="grid gap-6 sm:grid-cols-2">
        {page.data.length > 0 ? (
          page.data.map(quote => <QuoteCard quote={quote} />)
        ) : (
          <p class="text-sm text-muted">No quotes published yet.</p>
        )}
      </div>
    </section>
  </Main>
  <Pagination {page} />
  <Footer noMarginTop={page.lastPage > 1} />
</Layout>
